# Expand ue4cli
ue() {
        ue4cli=$HOME/.local/bin/ue4
        engine_path=$($ue4cli root)

  # cd to ue location
        if [[ "$1" == "engine" ]]; then
                cd $engine_path
  # combine clean and build in one command
        elif [[ "$1" == "rebuild" ]]; then
                $ue4cli clean
                $ue4cli build
                if [[ "$2" == "run" ]]; then
                        $ue4cli run
                fi
  # build and optionally run while respecting build flags
        elif [[ "$1" == "build" ]]; then
                if [[ "${@: -1}" == "run" ]]; then
                        length="$(($# - 2))" # Get length without last param because of 'run'
                        $ue4cli build ${@:2:$length}
                        $ue4cli run
                else
                        shift 1
                        $ue4cli build "$@"
                fi
  # Run project files generation, create a symlink for the compile database and fix-up the compile database
        elif [[ "$1" == "gen" ]]; then
                $ue4cli gen
                project=${PWD##*/}
                python $HOME/ue_gen.py ".vscode/compileCommands_${project}.json"
  # Pass through all other commands to ue4
        else
                $ue4cli "$@"
        fi
}

alias ue4='echo Please use ue instead.'
alias ue5='echo Please use ue instead.'

alias ue_opt='GLIBC_TUNABLES=glibc.rtld.dynamic_sort=2 ue'
